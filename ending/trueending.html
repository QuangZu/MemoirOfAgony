<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../img/Asset 1.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        @font-face {
            font-family: 'TT Travels Next Trial Bold';
            src: url('../font/TT Travels Next Trial Bold.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
        }
    </style>

    <!-- External CSS Files -->
    <link rel="stylesheet" href="ending.css">
    <link rel="stylesheet" href="../effect/glitch.css">
    <link rel="stylesheet" href="../effect/hover_letter.css">
    <link rel="stylesheet" href="../effect/vcr.css">
    <link rel="stylesheet" href="../effect/responsive.css">

    <title>True Ending - Memoir of Agony</title>
</head>
<body>
    <!-- Custom VHS Cursor -->
    <!-- Static noise overlay for TV turn-on effect -->
    <div class="static-overlay"></div>

    <!-- Matrix Background -->
    <div id="matrixBackground">
        <div class="matrix-wrapper" id="matrixWrapper"></div>
    </div>

    <!-- Ending Scene -->
    <div class="ending-scene">
        <div class="screen-container">
            <div class="screen-wrapper wobbley">
                <div class="screen-wrapper">
                    <div class="screen-wrapper">
                        <div class="content-wrapper">
                            <div class="ending-title-container">
                                <div class="glitch ending-glitch-title" id="glitchContainer">
                                    <div class="line" id="endingTitle"></div>
                                    <div class="line" id="endingTitle2"></div>
                                    <div class="line" id="endingTitle3"></div>
                                    <div class="line" id="endingTitle4"></div>
                                    <div class="line" id="endingTitle5"></div>
                                    <div class="line" id="endingTitle6"></div>
                                    <div class="line" id="endingTitle7"></div>
                                    <div class="line" id="endingTitle8"></div>
                                    <div class="line" id="endingTitle9"></div>
                                </div>
                            </div>
                            
                            <button class="menu-btn wobblex wobbley" id="menuBtn">
                                <span>MENU</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VCR Effects -->
        <div class="vignette"></div>
        <div class="scanlines"></div>
        <canvas class="vcr" id="vcrEnding"></canvas>
        <canvas class="snow" id="snowEnding"></canvas>
    </div>

    <!-- External Scripts -->
    <script src="dat.gui.min.js"></script>
    <script src="effectvcr.js"></script>
    <script src="audio.js"></script>

    <script>
        // ============================================
        // CREATE GLITCH TITLE - TRUE ENDING
        // ============================================

        const titleText = "TRUE ENDING";

        // Populate all 9 glitch lines with the same content
        for (let i = 1; i <= 9; i++) {
            const titleElement = document.getElementById(i === 1 ? 'endingTitle' : `endingTitle${i}`);
            
            titleText.split('').forEach(char => {
                const span = document.createElement('span');
                span.className = 'letter';
                span.textContent = char === ' ' ? '\u00A0' : char;
                titleElement.appendChild(span);
            });
        }

        // ============================================
        // MENU BUTTON NAVIGATION
        // ============================================

        const menuBtn = document.getElementById('menuBtn');

        menuBtn.addEventListener('click', (e) => {
            e.preventDefault();
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>
